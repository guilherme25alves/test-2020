{"remainingRequest":"D:\\Gui\\Projeto\\BeeLabs\\test-2020\\vue-students-admin-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Gui\\Projeto\\BeeLabs\\test-2020\\vue-students-admin-front\\src\\pages\\enrollments\\Store.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Gui\\Projeto\\BeeLabs\\test-2020\\vue-students-admin-front\\src\\pages\\enrollments\\Store.vue","mtime":1595979258984},{"path":"D:\\Gui\\Projeto\\BeeLabs\\test-2020\\vue-students-admin-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Gui\\Projeto\\BeeLabs\\test-2020\\vue-students-admin-front\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Gui\\Projeto\\BeeLabs\\test-2020\\vue-students-admin-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Gui\\Projeto\\BeeLabs\\test-2020\\vue-students-admin-front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCmltcG9ydCBTdHVkZW50cyBmcm9tICcuLi8uLi9zZXJ2aWNlcy9zdHVkZW50cycNCmltcG9ydCBDb3Vyc2VzIGZyb20gJy4uLy4uL3NlcnZpY2VzL2NvdXJzZXMnDQppbXBvcnQgRW5yb2xsbWVudHMgZnJvbSAnLi4vLi4vc2VydmljZXMvZW5yb2xsbWVudHMnDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgICANCiAgICBkYXRhKCl7DQogICAgICAgIHJldHVybiB7ICAgICAgICAgICANCiAgICAgICAgICAgIGVucm9sbG1lbnQ6IHsNCiAgICAgICAgICAgICAgICBzdHVkZW50X2lkOiAnJywNCiAgICAgICAgICAgICAgICBjb3Vyc2VfaWQ6ICcnLA0KICAgICAgICAgICAgICAgIGVucm9sbG1lbnRfZGF0ZTogJycsDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgdGl0bGU6ICJOb3ZhIE1hdHLDrWN1bGEiLA0KICAgICAgICAgICAgZXJyb3JTdHVkZW50OiAnJywNCiAgICAgICAgICAgIGVycm9yQ291cnNlOiAnJywNCiAgICAgICAgICAgIHN0dWRlbnRzOiBbXSwNCiAgICAgICAgICAgIGNvdXJzZXM6IFtdLCAgICAgICAgICAgIA0KICAgICAgICB9DQogICAgfSwNCg0KICAgIG1vdW50ZWQoKXsNCiAgICAgICAgdGhpcy5nZXRMaXN0U3R1ZGVudHMoKQ0KICAgICAgICB0aGlzLmdldExpc3RDb3Vyc2VzKCkgICAgICAgIA0KICAgIH0sDQoNCiAgICBtZXRob2RzOnsNCg0KICAgICAgICBhbGVydCgpIHsNCiAgICAgICAgICAgIHRoaXMuJHN3YWwoIkNhZGFzdHJhZG8hIiwgIlRyYW5zYcOnw6NvIGVmZXR1YWRhIGNvbSBzdWNlc3NvISIsICJzdWNjZXNzIikNCiAgICAgICAgfSwNCg0KICAgICAgICBnb0xpc3RFbnJvbGxtZW50cygpew0KICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9lbnJvbGxtZW50cycpICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgIH0sDQoNCiAgICAgICAgY3JlYXRlZCgpeyAgDQogICAgICAgICAgICB2YXIgZHROb3cgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgdGhpcy5lbnJvbGxtZW50LmVucm9sbG1lbnRfZGF0ZSAgPSANCiAgICAgICAgICAgICAgICBkdE5vdy5nZXRVVENGdWxsWWVhcigpICsiLyIrICAoZHROb3cuZ2V0VVRDTW9udGgoKSsxKSArIi8iKyBkdE5vdy5nZXRVVENEYXRlKCkgKw0KICAgICAgICAgICAgICAgICIgIiArIChkdE5vdy5nZXRVVENIb3VycygpIC0gMykgKyAiOiIgKyBkdE5vdy5nZXRVVENNaW51dGVzKCkgKyAiOiIgKyBkdE5vdy5nZXRVVENTZWNvbmRzKCk7DQoNCiAgICAgICAgICAgIEVucm9sbG1lbnRzLnNhdmUodGhpcy5lbnJvbGxtZW50KQ0KICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbGVydCgpICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZW5yb2xsbWVudCA9IHt9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JTdHVkZW50ID0gJycNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvckNvdXJzZSA9ICcnDQogICAgICAgICAgICAgICAgICAgIHRoaXMuZ29MaXN0RW5yb2xsbWVudHMoKSAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIH0pICANCiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIHZhciBlcnJvcnMgPSBlcnJvci5yZXNwb25zZS5kYXRhLmVycm9ycyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9yU3R1ZGVudCA9ICggInN0dWRlbnRfaWQiIGluIGVycm9ycykgPyBlcnJvcnMuc3R1ZGVudF9pZFswXSA6ICcnDQogICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JDb3Vyc2UgPSAoICJjb3Vyc2VfaWQiIGluIGVycm9ycykgPyBlcnJvcnMuY291cnNlX2lkWzBdIDogJycgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgfSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgIH0sDQoNCiAgICAgICAgZ2V0Q2xhc3MoZWxlbWVudCl7DQogICAgICAgICAgICB2YXIgY2xhc3NOYW1lID0gKGVsZW1lbnQgIT09ICcnKSA/ICdoYXMtZXJyb3InIDogJyc7DQogICAgICAgICAgICByZXR1cm4gY2xhc3NOYW1lOw0KICAgICAgICB9LA0KDQogICAgICAgIGdldExpc3RDb3Vyc2VzKCl7DQogICAgICAgICAgICBDb3Vyc2VzLmxpc3RDb3Vyc2VzKCkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy5jb3Vyc2VzID0gcmVzcG9uc2UuZGF0YS5kYXRhDQogICAgICAgICAgICB9KQ0KICAgICAgICB9LA0KDQogICAgICAgIGdldExpc3RTdHVkZW50cygpew0KICAgICAgICAgICAgU3R1ZGVudHMubGlzdFN0dWRlbnRzKCkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy5zdHVkZW50cyA9IHJlc3BvbnNlLmRhdGEuZGF0YQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgIH0NCg0KfQ0K"},{"version":3,"sources":["Store.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"Store.vue","sourceRoot":"src/pages/enrollments","sourcesContent":["<template>\r\n    <div>\r\n    \r\n        <div class=\"container\"> \r\n            <div class=\"hero-sm\">\r\n                <div class=\"hero-bod\">\r\n                    <h1 class=\"title-h\">{{ title }}</h1>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"columns\">\r\n                <div class=\"column col-4 col-mx-auto col-xs-12 col-sm-12 col-md-12\">\r\n                        \r\n                    <form class=\"form-horizontal\" @submit=\"created\">\r\n                        \r\n                        <div class=\"form-group\" v-bind:class=\"getClass(errorStudent)\">\r\n                            <label class=\"form-label label-lg\" for=\"student_id\">Aluno</label>\r\n                            <select class=\"form-select\" v-model=\"enrollment.student_id\">\r\n                                <option \r\n                                    v-bind:value=\"student.student_id\" \r\n                                    v-bind:key=\"student.student_id\" \r\n                                    v-for=\"student in students\"> {{ student.name }}</option>\r\n                            </select>\r\n                            <p v-if=\"errorStudent !== ''\" class=\"form-input-hint\">{{ errorStudent }}</p>                                                      \r\n                        </div>\r\n\r\n                        <div class=\"form-group\" v-bind:class=\"getClass(errorCourse)\">\r\n                            <label class=\"form-label label-lg\" for=\"course_id\">Curso</label>\r\n                          \r\n                            <select class=\"form-select\" v-model=\"enrollment.course_id\">\r\n                                <option \r\n                                    v-bind:value=\"course.course_id\" \r\n                                    v-bind:key=\"course.course_id\" \r\n                                    v-for=\"course in courses\">{{ course.title }}</option>\r\n                            </select>\r\n                            <p v-if=\"errorCourse !== ''\" class=\"form-input-hint\">{{ errorCourse }}</p>                                                      \r\n                        </div>\r\n                                              \r\n                        \r\n                        <button type=\"submit\" class=\"btn btn-edit\">Cadastrar</button>\r\n                        <button v-on:click=\"goListEnrollments\" type=\"button\" class=\"btn btn-detail\">Voltar</button>\r\n                    </form>                           \r\n                </div>                \r\n            </div>            \r\n            \r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport Students from '../../services/students'\r\nimport Courses from '../../services/courses'\r\nimport Enrollments from '../../services/enrollments'\r\n\r\nexport default {\r\n    \r\n    data(){\r\n        return {           \r\n            enrollment: {\r\n                student_id: '',\r\n                course_id: '',\r\n                enrollment_date: '',\r\n            },\r\n            title: \"Nova Matrícula\",\r\n            errorStudent: '',\r\n            errorCourse: '',\r\n            students: [],\r\n            courses: [],            \r\n        }\r\n    },\r\n\r\n    mounted(){\r\n        this.getListStudents()\r\n        this.getListCourses()        \r\n    },\r\n\r\n    methods:{\r\n\r\n        alert() {\r\n            this.$swal(\"Cadastrado!\", \"Transação efetuada com sucesso!\", \"success\")\r\n        },\r\n\r\n        goListEnrollments(){\r\n            this.$router.push('/enrollments')                           \r\n        },\r\n\r\n        created(){  \r\n            var dtNow = new Date();\r\n            this.enrollment.enrollment_date  = \r\n                dtNow.getUTCFullYear() +\"/\"+  (dtNow.getUTCMonth()+1) +\"/\"+ dtNow.getUTCDate() +\r\n                \" \" + (dtNow.getUTCHours() - 3) + \":\" + dtNow.getUTCMinutes() + \":\" + dtNow.getUTCSeconds();\r\n\r\n            Enrollments.save(this.enrollment)\r\n                .then(response => {\r\n                    this.alert()                            \r\n                    console.log(response);\r\n                    this.enrollment = {}                                    \r\n                    this.errorStudent = ''\r\n                    this.errorCourse = ''\r\n                    this.goListEnrollments()                  \r\n                })  \r\n                .catch((error) => {\r\n                    var errors = error.response.data.errors                                    \r\n                    this.errorStudent = ( \"student_id\" in errors) ? errors.student_id[0] : ''\r\n                    this.errorCourse = ( \"course_id\" in errors) ? errors.course_id[0] : ''                                        \r\n                })                            \r\n        },\r\n\r\n        getClass(element){\r\n            var className = (element !== '') ? 'has-error' : '';\r\n            return className;\r\n        },\r\n\r\n        getListCourses(){\r\n            Courses.listCourses().then(response => {\r\n                this.courses = response.data.data\r\n            })\r\n        },\r\n\r\n        getListStudents(){\r\n            Students.listStudents().then(response => {\r\n                this.students = response.data.data\r\n            })\r\n        }\r\n    }\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n    form, input, label {\r\n        font-family: 'Poppins';\r\n    }\r\n    .btn{\r\n        margin: 5px;\r\n    }\r\n    .btn-detail {\r\n        color: #649cb1 !important;\r\n        border: .05rem solid #649cb1 !important;\r\n        opacity: 1 !important;\r\n        width: 200px;\r\n    }\r\n    .btn-detail:hover {\r\n        color: #fff !important;\r\n        background: #649cb1 !important;\r\n        border: .05rem solid #fff !important;\r\n        opacity: 1 !important;\r\n        width: 200px;\r\n    }\r\n    .btn-edit {\r\n        color: #41b883 !important;\r\n        border: .05rem solid #41b883 !important;\r\n        opacity: 1 !important;\r\n        width: 200px;\r\n    }\r\n    .btn-edit:hover {\r\n        color: #fff !important;\r\n        background: #41b883 !important;\r\n        border: .05rem solid #fff !important;\r\n        opacity: 1 !important;\r\n        width: 200px;\r\n    }\r\n\r\n    .title-h {\r\n        color: #41b883;\r\n        font-family: fantasy;\r\n    }\r\n\r\n</style>"]}]}